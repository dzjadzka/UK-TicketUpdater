# UK-TicketUpdater Portainer Stack Environment Variables
# Copy this file to 'stack.env' and configure the values before deploying
#
# IMPORTANT: Never commit stack.env to version control as it contains secrets!

# =============================================================================
# Server Configuration
# =============================================================================
PORT=3000
DB_PATH=/app/data/app.db
OUTPUT_ROOT=/app/downloads
DEFAULT_DEVICE=desktop_chrome

# =============================================================================
# Default Admin User (created on first container startup)
# =============================================================================

# Default admin login (used for web UI login)
DEFAULT_ADMIN_EMAIL=admin

# Default admin password (CHANGE IN PRODUCTION!)
DEFAULT_ADMIN_PASSWORD=admin

# =============================================================================
# Security Configuration (REQUIRED - Change these in production!)
# =============================================================================

# JWT secret for signing authentication tokens (minimum 32 characters)
# Generate with: openssl rand -hex 32
JWT_SECRET=CHANGE_THIS_VALUE_BEFORE_DEPLOYMENT

# Encryption key for storing sensitive credential data (minimum 32 characters)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=CHANGE_THIS_VALUE_BEFORE_DEPLOYMENT

# JWT token expiry duration
JWT_EXPIRY=7d

# =============================================================================
# Admin Ticket Credentials (Required for base ticket monitoring)
# =============================================================================

# Admin account username for base ticket checks
TICKET_ADMIN_USERNAME=your-admin-username

# Admin account password for base ticket checks
TICKET_ADMIN_PASSWORD=your-admin-password

# =============================================================================
# Job Queue Configuration
# =============================================================================

# Queue backend: 'persistent' (SQLite-backed, recommended) or 'memory'
JOB_QUEUE_BACKEND=persistent

# Maximum concurrent download jobs
JOB_CONCURRENCY=2

# Hours between base ticket checks
BASE_TICKET_CHECK_INTERVAL_HOURS=6

# Enable/disable automatic job scheduler
JOBS_SCHEDULER_ENABLED=true

# =============================================================================
# Rate Limiting
# =============================================================================

# API rate limit per user (requests per window)
AUTH_RATE_LIMIT_MAX=300

# API rate limit window in milliseconds (default: 15 minutes)
AUTH_RATE_LIMIT_WINDOW_MS=900000

# Ticket provider rate limit (requests per minute)
TICKET_RATE_LIMIT_PER_MINUTE=12

# Ticket provider rate limit window in milliseconds
TICKET_RATE_LIMIT_WINDOW_MS=60000
